<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CFC26 | Tactical Command</title>
    <style>
        :root { --blue: #034694; --gold: #FFD700; --pitch: #236127; --white: #ffffff; --bg: #000b26; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: var(--white); font-family: -apple-system, sans-serif; padding-bottom: 60px; }
        
        /* HEADER & NAV */
        .header { background: #000; padding: 10px; border-bottom: 2px solid var(--gold); position: sticky; top: 0; z-index: 1000; }
        .main-nav { background: var(--blue); color: white; border: 1px solid var(--gold); padding: 10px; border-radius: 6px; width: 100%; font-size: 14px; font-weight: bold; cursor: pointer; }

        .container { width: 100%; max-width: 1000px; margin: 0 auto; padding: 10px; }
        .section { display: none; width: 100%; }
        .active-section { display: block; animation: fadeIn 0.3s ease; }

        /* PITCH STYLES */
        .pitch-card { background: var(--pitch); border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; height: 500px; position: relative; overflow: hidden; margin-top: 10px; box-shadow: inset 0 0 50px rgba(0,0,0,0.5); }
        .pitch-line { position: absolute; border: 1px solid rgba(255,255,255,0.3); }
        .center-circle { width: 100px; height: 100px; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); border: 1px solid rgba(255,255,255,0.3); position: absolute; }
        .half-line { width: 100%; top: 50%; height: 1px; }

        .player-node { position: absolute; width: 55px; height: 55px; background: var(--blue); border: 2px solid var(--gold); border-radius: 50%; color: white; font-size: 10px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: bold; transform: translate(-50%, -50%); box-shadow: 0 4px 8px rgba(0,0,0,0.4); cursor: default; }
        .is-admin .player-node { cursor: pointer; border-style: dashed; }

        /* TABLES & CARDS */
        .card { background: white; color: #111; border-radius: 10px; padding: 15px; margin-bottom: 15px; width: 100%; }
        h3 { color: var(--blue); font-size: 1.1rem; margin-bottom: 10px; border-bottom: 2px solid #f0f0f0; }
        .table-wrapper { width: 100%; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; min-width: 320px; }
        th, td { padding: 8px 4px; border-bottom: 1px solid #eee; text-align: center; }
        input { border: 1px solid #ccc; border-radius: 4px; padding: 4px; width: 100%; text-align: center; }
        .is-admin input { background: #fffde7; border: 1px dashed var(--gold); }
        
        .btn-gold { background: var(--gold); color: #000; border: none; padding: 12px; font-weight: bold; border-radius: 6px; width: 100%; margin-top: 10px; cursor: pointer; }
        .admin-only { display: none; } .is-admin .admin-only { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; } }
    </style>
</head>
<body id="main-body">

<div class="header">
    <div class="container" style="padding:0">
        <select class="main-nav" onchange="navigate(this.value)">
            <option value="squad">üìã Squad & Formation</option>
            <option value="pl">üèÜ Premier League</option>
            <option value="ucl">üá™üá∫ Champions League</option>
            <option value="matches">üèüÔ∏è Match Log</option>
            <option value="boot">üëü Golden Boot</option>
            <option value="admin">üîê Admin Access</option>
        </select>
    </div>
</div>

<div class="container">
    <div id="sec-squad" class="section active-section">
        <div class="card" style="background:transparent; padding:0;">
            <h3 style="color:white; border-bottom:none">Starting XI (4-2-3-1)</h3>
            <div class="pitch-card" id="pitch-viz">
                <div class="half-line pitch-line"></div>
                <div class="center-circle"></div>
                </div>
            <p style="font-size:12px; color:#aaa; margin-top:10px; text-align:center;">Admin: Click a player to swap/edit names.</p>
        </div>
    </div>

    <div id="sec-pl" class="section">
        <div class="card">
            <h3>Premier League</h3>
            <div class="table-wrapper"><table id="pl-table"><thead><tr><th>Pos</th><th style="text-align:left">Team</th><th>P</th><th>GD</th><th>Pts</th></tr></thead><tbody id="pl-body"></tbody></table></div>
        </div>
    </div>

    <div id="sec-ucl" class="section">
        <div class="card">
            <h3>UCL League Phase</h3>
            <div class="table-wrapper"><table id="ucl-table"><thead><tr><th>Pos</th><th style="text-align:left">Club</th><th>P</th><th>GD</th><th>Pts</th></tr></thead><tbody id="ucl-body"></tbody></table></div>
        </div>
    </div>

    <div id="sec-matches" class="section">
        <div class="card admin-only">
            <h3>Add Match Result</h3>
            <input type="text" id="opp-name" placeholder="Opponent">
            <input type="number" id="h-score" placeholder="CFC Score" style="width:48%">
            <input type="number" id="a-score" placeholder="Opp Score" style="width:48%">
            <button class="btn-gold" onclick="addMatch()">Save Result</button>
        </div>
        <div class="card"><h3>Match History</h3><div id="results-list"></div></div>
    </div>

    <div id="sec-boot" class="section">
        <div class="card">
            <h3>Golden Boot</h3>
            <table id="boot-table"><thead><tr><th style="text-align:left">Player</th><th>Goals</th></tr></thead><tbody id="boot-body"></tbody></table>
            <button class="btn-gold admin-only" onclick="addScorer()">+ Add Player</button>
        </div>
    </div>
</div>

<script>
    const plDefault = ["Arsenal","Aston Villa","Bournemouth","Brentford","Brighton","Burnley","CHELSEA","Crystal Palace","Everton","Fulham","Leeds","Liverpool","Man City","Man Utd","Newcastle","Nott'm Forest","Sunderland","Tottenham","West Ham","Wolves"];
    const uclDefault = ["Real Madrid","Man City","Bayern","Arsenal","Barcelona","Inter","CHELSEA","Liverpool","PSG","Leverkusen","Atletico","Juve","Atalanta","Dortmund","Sporting","Benfica","AC Milan","Newcastle","Monaco","Lille"];

    let state = JSON.parse(localStorage.getItem('cfc_v56')) || {
        isAdmin: false,
        pl: plDefault.map(t => ({name: t, p: 0, gd: 0, pts: 0})),
        ucl: uclDefault.map(t => ({name: t, p: 0, gd: 0, pts: 0})),
        squad: { "GK": "Sanchez", "LB": "Cucurella", "CB1": "Colwill", "CB2": "Fofana", "RB": "James", "DM1": "Caicedo", "DM2": "Lavia", "LW": "Neto", "AM": "Palmer", "RW": "Est√™v√£o", "ST": "Jo√£o Pedro" },
        matches: [],
        boot: [{n: "Cole Palmer", g: 0}]
    };

    function save() { localStorage.setItem('cfc_v56', JSON.stringify(state)); render(); }
    function sortT(data) { return data.sort((a,b) => (b.pts - a.pts) || (b.gd - a.gd) || a.name.localeCompare(b.name)); }

    function render() {
        document.getElementById('main-body').className = state.isAdmin ? "is-admin" : "";
        const canEdit = state.isAdmin;

        // Render Pitch
        const posMap = { GK:[50,90], LB:[15,72], CB1:[38,78], CB2:[62,78], RB:[85,72], DM1:[35,55], DM2:[65,55], LW:[15,30], AM:[50,35], RW:[85,30], ST:[50,12] };
        const pitch = document.getElementById('pitch-viz');
        pitch.querySelectorAll('.player-node').forEach(n => n.remove());
        for(let p in posMap) {
            const node = document.createElement('div');
            node.className = 'player-node';
            node.style.left = posMap[p][0] + '%';
            node.style.top = posMap[p][1] + '%';
            node.innerText = state.squad[p];
            node.onclick = () => { if(state.isAdmin) { let n = prompt("New Player Name:", state.squad[p]); if(n) { state.squad[p] = n; save(); } } };
            pitch.appendChild(node);
        }

        // Tables
        const renderTable = (id, data, type) => {
            const sorted = sortT([...data]);
            document.getElementById(id).innerHTML = sorted.map((t, i) => {
                const idx = data.indexOf(t);
                return `<tr style="${t.name==='CHELSEA'?'background:#eef4ff;font-weight:bold':''}">
                    <td>${i+1}</td>
                    <td style="text-align:left"><input value="${t.name}" ${canEdit?'':'disabled'} onchange="uT('${type}',${idx},'name',this.value)" style="text-align:left"></td>
                    <td><input type="number" value="${t.p}" ${canEdit?'':'disabled'} onchange="uT('${type}',${idx},'p',this.value)"></td>
                    <td><input type="number" value="${t.gd}" ${canEdit?'':'disabled'} onchange="uT('${type}',${idx},'gd',this.value)"></td>
                    <td><input type="number" value="${t.pts}" ${canEdit?'':'disabled'} onchange="uT('${type}',${idx},'pts',this.value)"></td>
                </tr>`;
            }).join('');
        };
        renderTable('pl-body', state.pl, 'pl');
        renderTable('ucl-body', state.ucl, 'ucl');

        // Results & Boot
        document.getElementById('results-list').innerHTML = state.matches.map((m, i) => `<div class="match-item" style="color:black; background:#f4f4f4; margin:5px 0; padding:10px; border-radius:5px; display:flex; justify-content:space-between"><span><b>${m.opp}</b></span><span>${m.h}-${m.a} ${canEdit?`<button onclick="delMatch(${i})">‚úñ</button>`:''}</span></div>`).reverse().join('');
        document.getElementById('boot-body').innerHTML = [...state.boot].sort((a,b)=>b.g-a.g).map((p, i) => {
            const idx = state.boot.indexOf(p);
            return `<tr><td><input value="${p.n}" ${canEdit?'':'disabled'} onchange="uB(${idx},'n',this.value)" style="text-align:left"></td><td><input type="number" value="${p.g}" ${canEdit?'':'disabled'} onchange="uB(${idx},'g',this.value)"></td></tr>`;
        }).join('');
    }

    function addMatch() {
        const opp = document.getElementById('opp-name').value;
        const h = document.getElementById('h-score').value;
        const a = document.getElementById('a-score').value;
        if(opp) { state.matches.push({opp, h, a}); save(); }
    }
    function delMatch(i) { state.matches.splice(i, 1); save(); }
    function uT(t, i, k, v) { state[t][i][k] = k==='name'?v:parseInt(v||0); save(); }
    function uB(i, k, v) { state.boot[i][k] = k==='n'?v:parseInt(v||0); save(); }
    function addScorer() { state.boot.push({n: "New Player", g: 0}); save(); }
    function navigate(v) {
        if(v === 'admin') { state.isAdmin = (prompt("Key:") === "BLUE2026"); render(); return; }
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
        document.getElementById('sec-' + v).classList.add('active-section');
    }

    window.onload = render;
</script>
</body>
</html>
